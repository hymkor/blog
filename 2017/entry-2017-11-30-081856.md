Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2017/11/30/081856
Rem: App-Edited: 2024-01-21T13:54:12+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/8599973812322320802
Rem: Published: 2017-11-30T08:18:56+09:00
Category: batchfile
Updated: 2017-11-30T08:18:56+09:00
Title: vimとバッチファイルでtwitter と mstdn.jp にコマンドプロンプトから同時投稿する
---
`dondon.cmd` を実行すると vim が起動する。

- 投稿したい時は「`:eq`」
    - [twtr.exe](https://github.com/mattn/twty) と [mstdn.exe](https://github.com/mattn/go-mastodon/tree/master/cmd/mstdn) を使って、twitter と [mstdn.jp](https://mstdn.jp) に投稿する
- キャンセルする時は「`:cq`」か、ゼロバイトにしてから「`:eq`」

つ `dondon.cmd`

```
@echo off
setlocal
set "DON=%TEMP%\don.txt"
type nul > "%DON%"
vim -c "e ++enc=utf8" "%DON%"
if errorlevel 1 exit /b
for %%I in (%DON%) do set "SIZE=%%~zI"
if %SIZE% LEQ 3 exit /b
twty -ff "%DON%"
mstdn toot -ff "%DON%"
endlocal
```