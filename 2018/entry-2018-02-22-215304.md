```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2018/02/22/215304
Rem: App-Edited: 2018-02-22T21:53:04+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/17391345971618795310
Rem: Published: 2018-02-22T21:53:04+09:00
Category: go
Updated: 2018-02-22T21:53:04+09:00
Title:  Appveyor がまだ Go 1.10 をサポートしてなかったので、自前で取ってくるよう設定した
```
strings.Builder を使いたくて、ローカルの環境を Go 1.10 にしたが、Appveyor がまだ Go 1.9.2 のままだ。そのせいで、git push するたびに失敗マークがついてしまう。

Appveyor のサポートサイトを適当に見てみたら、Go 1.3 しか入っていない頃に書かれた 1.4 を使う手順があった。

[Go 1.4 support / Problems / Discussion Area - AppVeyor Support](https://help.appveyor.com/discussions/problems/1215-go-14-support)

これの真似をして、Go 1.10 をダウンロードして使うように appveyer.xml を修正した。

```
diff --git a/appveyor.yml b/appveyor.yml
index dfe71e0..17fe0be 100644
--- a/appveyor.yml
+++ b/appveyor.yml
@@ -30,8 +30,10 @@ environment:
     - platform: i386
     - platform: amd64

-
 install:
+  - rd C:\Go /s /q
+  - appveyor DownloadFile https://dl.google.com/go/go1.10.windows-386.zip
+  - 7z x go1.10.windows-386.zip -oC:\ >nul
   - set INSTALL_DIR=%APPVEYOR_BUILD_FOLDER%\%DEST_DIR%\%PLATFORM%
   - ps: |
       if ($env:PLATFORM -eq "i386") {
```

Go はクロスコンパイルできるので、go1.10.windows-386.zip でも amd64 版を作れるはず。

一応、ビルドは通っているが、なぜか成果物のダウンロードができない（ネットワークエラーになる）。
エラーになってないから、まぁ、いいか。
