Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2018/04/09/114600
Rem: App-Edited: 2020-12-03T22:40:37+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/17391345971633548869
Rem: Published: 2018-04-09T11:46:00+09:00
Category: autolisp CAD lisp
Updated: 2018-04-09T11:46:00+09:00
Title: let のない Lisp で  lambda を let のかわりにつかう
---
無いものを嘆いていても仕方がないので、できることを模索しよう。

autolisp系のLispでは let が使えず、ローカル変数は、関数の頭でしか宣言できない。また、use strict 相当のものがないため、関数が長くなるとローカル変数の宣言漏れがないかどうかをチェックするのも（宣言するところと使用する場所が離れているため）結構たいへんだ。

そんな折、[let が lambda の糖衣構文である処理系もあるという話](http://www.shido.info/lisp/scheme6.html)を聞いた。なるほど、let は lambda の変形なのか。ということで、lambda で let 相当のことをやってみよう。

```test-lambda.lsp
(defun C:test-lambda (/ tmp)
  (setq tmp "hogehoge")
  (princ "\nbefore=")(prin1 tmp)
  ((lambda (tmp) ; instead of (let)
           (princ "\nin lambda=")(prin1 tmp)
           ) "uhauha")
  (princ "\nafter=")(prin1 tmp)
  (princ)
)
```

思ったほど、見づらくない。lambda と同じ行に「`; instead of let`」と書くようにすれば、他の読み手にも分かってもらえそう。動作結果はどうだろう。

```
: TEST-LAMBDA

before="hogehoge"
in lambda="uhauha"
after="hogehoge"
```

よしよし