Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2018/06/08/231328
Rem: App-Edited: 2019-05-07T23:33:39+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/17391345971652290063
Rem: Published: 2018-06-08T23:13:28+09:00
Category: batchfile
Updated: 2018-06-08T23:13:28+09:00
Title: go get でインストールされる実行ファイル置き場をバッチファイルで得る
---
`%GOPATH%\bin` と書いてしまいがちだが

* `%GOPATH%` が未定義の時
  * `%USERPROFILE%\go` が代替として使われる
* `%GOPATH%` に複数のディレクトリが登録されている時
  * 最初のディレクトリが使用される

ので、一工夫必要だ。


```gobin.cmd
@echo off

setlocal

if "%GOPATH%" == "" (
    set "DIR=%USERPROFILE%\go"
) else (
    set "DIR=%GOPATH%"
)

for /F "delims=;" %%I in ("%DIR%") do set "GOBIN=%%I\bin"

echo GOBIN=%GOBIN%

endlocal
```

思ったほど大した工夫は要らなかった…