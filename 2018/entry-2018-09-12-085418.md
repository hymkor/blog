Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2018/09/12/085418
Rem: App-Edited: 2018-10-20T12:53:55+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/10257846132627824383
Rem: Published: 2018-09-12T08:54:18+09:00
Category: go
Updated: 2018-09-12T08:54:18+09:00
Title:  二重引用符などで面倒なことにならない cmd.exe の呼び方
---
環境変数を使おう。

```
func system(cmdline string) error {
	const CMDVAR = "CMDVAR"

	orgcmdarg := os.Getenv(CMDVAR)
	defer os.Setenv(CMDVAR, orgcmdarg)

	os.Setenv(CMDVAR, cmdline)

	cmd1 := exec.Command("cmd.exe", "/c", "%"+CMDVAR+"%")
	cmd1.Stdout = os.Stdout
	cmd1.Stderr = os.Stderr
	cmd1.Stdin = os.Stdin
	return cmd1.Run()
}
```