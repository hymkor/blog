Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2018/10/22/220916
Rem: App-Edited: 2018-10-22T22:09:16+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/10257846132658045500
Rem: Published: 2018-10-22T22:09:16+09:00
Category: go hyperestraier
Updated: 2018-10-22T22:09:16+09:00
Title: Windows用のHyperEstraierのGo言語のラッパーを作りました、途中まで！
---
（[qrunch.io](https://zetamatta.qrunch.io/entries/hSHFmFjsgHnlR2Kb)より転記）

これな

* [zetamatta/go-hyperestraier-win32: golang wrapper for estraier.dll (win32)](https://github.com/zetamatta/go-hyperestraier-win32)

実は会社で HyperEstraier を使ったWindows 製品の保守をちょっとだけしているのですが、標準のコマンドラインツール estcmd は UTF8 でして、ANK 文字ならいいんですが、日本語が入るとコマンドラインは CP932 （ShiftJIS+α）なので、つらいことに！

ということで、Go言語でラッパーを作りました。といっても、検索側の機能だけで、インデックスを作成する方はまだ未実装です（そのうち、必要になったら作りますが、とりあえず目下の問題が解消されたので、すぐやる必要がなくなってしまった！）

この手のツールは、"cgo" を使ってC言語ライブラリをスタティックリンクするのが普通なんですが、自分はついつい慣れた「**syscall.NewLazyDLL で Windows のバイナリライブラリを呼び出す**」という方法の方を使ってしまいます。プロプライエタリなソフトウェアならともかく、オープンソースソフトウェアのライブラリで、それやる必要あんの？という感じですが、ジジイはついつい慣れた方法を使ってしまうものなのです。

ほとんど自分しか使わないツールですが、もし他に使う人がいらっしゃるようであれば、まじめに改善に取り組みますので、コメントください