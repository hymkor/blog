Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2019/01/17/024955
Rem: App-Edited: 2019-01-17T02:52:38+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/10257846132706850804
Rem: Published: 2019-01-17T02:49:55+09:00
Category:
Updated: 2019-01-17T02:49:55+09:00
Title: nyagos と VMware と DropBox
---
有償版 DropBox にはスマートシンクという、ディスクを節約する機能があって、「エクスプローラーからファイルは見えるけど、ローカルディスク上に実態は存在しなくて、ファイルを読むアクションをした時に自動ダウンロードする」という機能がある。

この機能の目的は、主にローカルディスクの容量の節約だ。DropBox をファイルサーバー代わりに使うには必須といえる。

で、物理マシンから DropBox フォルダーを`ls` する分には何も問題はないんだけど、自分は DropBox フォルダーを VMware の共有フォルダーにして、`\\vmware-host\Shared Folders\DropBox` 経由で、仮想マシンからアクセスできるようにしている。

そうするとだ… 仮想マシンの中から DropBox フォルダーで`ls` するだけで、そのフォルダーの全ファイルを自動ダウンロードしようとしてしまうのだ！なんてこったい！

* [`ls` causes downloading online files on the DropBox folder · Issue #350 · zetamatta/nyagos](https://github.com/zetamatta/nyagos/issues/350)

確認したところ、`echo *` ではダウンロードされないようだ。おそらくだが、ls で表示する際、リパースポイントになっている時、それが本当のシンボリックリンクかどうかを検証するために実行している os.ReadLink が問題なのだろう！どうしたもんかなぁー  
（方針、いろいろ迷ってる）