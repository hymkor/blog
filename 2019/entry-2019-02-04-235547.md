```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2019/02/04/235547
Rem: App-Edited: 2019-02-07T18:42:14+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/98012380857927688
Rem: Published: 2019-02-04T23:55:47+09:00
Category: go
Updated: 2019-02-04T23:55:47+09:00
Title:  Go で Cygterm っぽいことをやりたいので、ソケットサーバーを書いている（勉強中）
```
（[続きの記事](http://zetamatta.hatenablog.com/entry/2019/02/07/184029) あり)

serv.go :

```go
package main

import (
	"fmt"
	"net"
	"os"
	"strings"
)

func handler(conn net.Conn) {
	defer conn.Close()

	var buffer [255]byte

	for {
		n, err := conn.Read(buffer[:])
		if err != nil {
			fmt.Fprintln(os.Stderr, err)
			return
		}
		text := string(buffer[:n])
		text = strings.Replace(text,"\r","\n",-1)
		conn.Write(buffer[:n])
		fmt.Printf("[%s]\n",text )
	}
}

func main1() error {
	ln, err := net.Listen("tcp", ":8080")
	if err != nil {
		return err
	}
	for {
		conn, err := ln.Accept()
		if err != nil {
			return err
		}
		go handler(conn)
	}
}

func main() {
	if err := main1(); err != nil {
		fmt.Fprintln(os.Stderr, err)
		os.Exit(1)
	}
}
```

`go run serv.go` すると、teraterm で telnet の localhost:8080 に接続できる。が、TeraTerm 側でEnter を入力しないと通信が届かない。これ、Enter なしで送受信するにはどうすればいいんだろう
