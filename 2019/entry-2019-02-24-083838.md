```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2019/02/24/083838
Rem: App-Edited: 2019-02-24T08:38:38+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/17680117126978556517
Rem: Published: 2019-02-24T08:38:38+09:00
Category:
Updated: 2019-02-24T08:38:38+09:00
Title: Windows のアプリケーションディレクトリ
```
nyagos では、ヒストリなどを

* Windows では `%APPDATA%\nyaos_org`
* Linux では `$HOME/.nyaos_org`

に保存している。このパスは環境変数を元に生成しているのだが、ここのところで OS ごとに処理を分けるのは可読性を下げるので、できれば標準ライブラリが吸収してくれたらなぁと思った。

標準ライブラリのユーザのディレクトリを教えてくれる関数の結果を確認してみた。

```go
u,_:= "os/user".Current() ; u.HomeDir
    → %USERPROFILE% or $HOME相当※
dir,_ := "os".UserCacheDir() ; dir
    → %USERPROFILE%\AppData\Local or $HOME/.cache相当※

（※ 実際は環境変数は展開済み）
```

結果はちょっと欲しいものとは違ったのだけれども、はて AppData の下の Local とは Roaming 等とはどう違うのだろうか？と今更だが、疑問が湧いてきた。

ぐぐってみたところ、解説ページが見つかった

* [AppDataフォルダ直下のLocal／LocalLow／Roamingサブフォルダの違いについて。 - 量産メモ帳](http://rms-099.hatenablog.jp/entry/20130120/1359218895)
* [猫科研究所 - Roaming, Local, LocalLow](http://www.up-cat.net/Roaming,+Local,+LocalLow.html)

どうやら

* Roaming(`=%APPDATA%`) … ユーザデータのうち、プロファイルを移動させた時にいっしょに移動させるべきデータ。
    * あまり大きいものを入れるべきでない
    * その PC 固有のものは入れるべきではない
* Local(`os.UserCacheDir()`) … プロセスの信頼レベルが Low より上のもののデータを格納
* LocalLow … プロセスの信頼レベルが Low 以下のもののデータを格納（主に Internet Explorer 用？）

というような使い分けらしい。なるほど

