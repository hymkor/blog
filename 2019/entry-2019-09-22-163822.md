```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2019/09/22/163822
Rem: App-Edited: 2021-04-27T01:29:48+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/26006613438774435
Rem: Published: 2019-09-22T16:38:22+09:00
Category: C++
Updated: 2019-09-22T16:38:22+09:00
Title: (続々) std::vector / std::set 両方からデータを取れる関数をあまりテンプレートにしたくない
```
（半日も経ってませんが、[(続) std::vector / std::set 両方からデータを取れる関数をあまりテンプレートにしたくない - 標準愚痴出力](http://zetamatta.hatenablog.com/entry/2019/09/22/131156)からの続きです）

前回 std::function を使って、コールバック関数を関数オブジェクトにし、呼び出しを簡素にしてみたわけですが、まだ型パラメータが長めでした。それをなんとか一つまでに減らしてみました。

```cpp
#include <iostream>
#include <vector>
#include <functional>
#include <set>

template <typename T>
class enumerator {
    typename T::iterator m_cursor,m_end;
public:
    enumerator(typename T::iterator begin,typename T::iterator end)
        : m_cursor(begin) , m_end(end) {}
    bool operator() (typename T::value_type &store) {
        if( m_cursor == m_end ){
            return false;
        }
        store = *m_cursor;
        m_cursor++;
        return true;
    };
};


void put(const std::function<bool(std::string&)> &each)
{
    std::string value;
    while( each(value) ){
        std::cout << value << std::endl;
    }

int main()
{
    std::vector<std::string> v;
    v.push_back( "a" );
    v.push_back( "b" );
    v.push_back( "c" );

    put( enumerator<std::vector<std::string>>(v.begin(),v.end()) );

    std::set<std::string> s;
    s.insert( "a" );
    s.insert( "b" );
    s.insert( "c" );

    put( enumerator<std::set<std::string>>(s.begin(),s.end()) );
}
```

よしよし
