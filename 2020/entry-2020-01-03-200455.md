```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2020/01/03/200455
Rem: App-Edited: 2023-04-28T22:45:29+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/26006613492690625
Rem: Published: 2020-01-03T20:04:55+09:00
Category: lua
Updated: 2020-01-03T20:04:55+09:00
Title:  素の Lua で setenv
```
環境変数を参照する場合は `os.getenv` が使えるが、設定するための `os.setenv` 相当のものはない。

が、`os.execute` で自分自身を呼び出せば、無理やり設定することも可能だ（ただし、起動時のみ）

```lua
--- LANG=C を設定したい時：
if os.getenv("LANG") ~= "C" then
    if string.match(os.getenv("OS") or "","^Windows") then
        os.execute('set "LANG=C" & lua "' .. arg[0] .. '"')
    else
        os.execute('LANG=C ; export LANG ; lua "' .. arg[0] .. '"')
    end
    os.exit(0)
end
print("LANG=" .. (os.getenv("LANG") or "null"))
```

まぁ、普通は Lua を呼び出すホスト側で setenv 相当の機能をつけるものだけどね
（nyagos-Lua には `nyagos.env["変数名"]` が代入・参照両方できる）
