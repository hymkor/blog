Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2020/01/21/231004
Rem: App-Edited: 2023-04-28T22:44:08+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/26006613500842894
Rem: Published: 2020-01-21T23:10:04+09:00
Category: lua
Updated: 2020-01-21T23:10:04+09:00
Title:  Lua で名前付き関数パラメータ
---
Luaでは「**関数のパラメータがテーブルコンストラクター１個の時、関数コールの丸括弧を省略できる**」という書式があります。

これはつまり

```Lua
function f(a)
    for key,val in pairs(a) do
        print(key.."="..val)
    end
end

f( { param1="12345" , param2="abcdef" } )
```

の関数コール部分を

```Lua
f{ param="12345" , param2="abcdef" }
```

と書けることを意味します。これは、ほとんど他の高級言語の名前付きパラメータと同じですね。

これについて、[ドキュメント](http://www.lua.org/manual/5.3/manual.html#3.4.10)を見ると、関数のパラメータの記載には以下の三種類が許されているようです。

```
	args ::= ‘(’ [explist] ‘)’
	args ::= tableconstructor
	args ::= LiteralString
```

どうやら、**引数が文字列１個の場合も関数コールの丸括弧を省略できる**ようです。これはすなわち

```lua
require "モジュール名"
```

で使われている文法です。

この機能、他にも応用が聞きそうです。例えばC++ではワイド文字列を `L"..."` と表現しますが、Lua でも、ANSI文字列をUnicode文字列へ変換する関数 `L` を定義してやれば同等のことができそうです。

このように、Lua では文法や機能をいたずらに増やすのではなく、ちょっとしたシンタックスシュガーの追加で少数の機能で多くの表現ができるような工夫が随所に見られます。

こういった工夫が Lua のコンパクトさを実現し、多くの環境で動作する強みにつながっているのではないかと考えられます。

みんなも使おうぜ、Lua