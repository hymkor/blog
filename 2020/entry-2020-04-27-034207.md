Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2020/04/27/034207
Rem: App-Edited: 2023-04-28T22:29:29+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/26006613556816589
Rem: Published: 2020-04-27T03:42:07+09:00
Category:
Updated: 2020-04-27T03:42:07+09:00
Title: xnhttpd に静的コンテンツ＆markdownテキストの発信機能をつけました
---
前回：「[CGIをローカルテストするための簡易ウェブサーバー xnhttpd をGoで書きました](https://zetamatta.hatenablog.com/entry/2020/04/19/180002) 」で実装した CGIテスト用ウェブサーバー [xnhttpd](https://github.com/zetamatta/xnhttpd) に、静的コンテンツや markdown を発信する機能を実装しました。

* [zetamatta/xnhttpd: Tiny Web Server to test CGI on localhost.](https://github.com/zetamatta/xnhttpd)

markdown プレビューアとして、これまで [mkup](https://github.com/mattn/mkup) を使っていたのですが、自分好みのスタイルシートを使いたかったのと、もう少しウェブサーバーを作り込んでみたかったというのが開発動機です。

* 拡張子が .jpg , .gif , .html の時、xnhttpd のカレントディレクトリ以下にそのファイルがあれば、そのまま静的コンテンツとして発信するようにした
* 拡張子が .md の時は、同ファイルを [yuin/goldmark](https://github.com/yuin/goldmark)で markdown → HTML 化してから発信する
* markdown テキストの時の CSS は 本当は GitHub のやつを使いたかったが、ソースを見ても複雑すぎてよう分からんので(汗)、適当に wifky に使われているデフォルトのやつをベタでくっつけた。

TO DO
-------

* ディレクトリを指定された時は index.html もしくは readme.md を出力するようにする
* CGI機能を使わず、markdown プレビューアとしてだけ使う時、今のところ `echo {} | xnhttpd` としないと標準入力からの EOF 待ちになってしまう。もう設定ファイル入力なりオプションなりを検討する

以上