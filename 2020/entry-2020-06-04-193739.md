Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2020/06/04/193739
Rem: App-Edited: 2020-06-04T23:56:11+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/26006613579018784
Rem: Published: 2020-06-04T19:37:39+09:00
Category:
Updated: 2020-06-04T19:37:39+09:00
Title: Windows の FileID とは
---
> Windows は i-node がないから、２つのファイル名の同一性のチェックが面倒だ。
> 
> - 「.」や「..」を解決して
> - 相対パスを絶対パス化して
> - 英大文字・小文字を統一
> 
> といったことをせにゃならん。それでもなお、ジャンクションとか、ドライブ文字へのディレクトリアサインとかあって、無理

などということを言っていたら、ファイルIDがあるという情報をいただいた。

どうやら

* コマンドラインでは、`fsutil.exe file queryFileNameById` で確認できる
    * ただし出力は `ファイル ID は 0x00000000000000000072000000004033 です` などというなんとも使いにくいテキスト
* USBメモリなどの FAT や、VMware の共有フォルダー上のファイルでもとれた
* ちゃんとした API が用意されているので、それを使えということらしい
    * → [Win32 File-ID APIs - espresso3389の日記](http://espresso3389.hatenablog.com/entry/20080212/1202808319)

これが COM (Scripting.FileSystemObject) とかで読み出せたら便利なんだがなぁ（まぁ贅沢はいうまい）

追記
-----

File-ID を得る Go のパッケージを書いた。

* [zetamatta/go-windows-fileid: Query File-ID. File-ID is the number like i-node on Windows.](https://github.com/zetamatta/go-windows-fileid)