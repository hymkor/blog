```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2022/02/05/092846
Rem: App-Edited: 2024-01-21T13:02:09+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/13574176438060177296
Rem: Published: 2022-02-05T09:28:46+09:00
Category: Git
Updated: 2022-02-05T09:28:46+09:00
Title: Gitレポジトリを初期化＋アルファをするサブコマンドを書いた
```
`git-xxx` という名前の実行ファイルを %PATH% の中に書いておくと `git xxx` いう風に git のサブコマンドとして呼び出すことが出来る。Windows の場合は、拡張子の解釈の都合でバッチファイルは使えないが、そのかわり git付属のbashスクリプトが使える。

で、レポジトリを初期化するサブコマンドを書いた。やることは

- `git init`
- `git config --local` でユーザ名とメールアドレスを登録
    - レポジトリによって私用と会社用のメールアドレスを変える場合があるので、`git config --global` は使わない
    - メールアドレスは第一引数で指定する
- LF↔CRLF 変換を禁止したいので、全部のファイルはバイナリ扱いにする

ファイル名は拡張子なしで `git-new`

```sh
#!/bin/bash

if [ -z "$1" ] ; then
    echo Usage: git new EMAIL-ADDRESS
    exit 1
fi

if [ ! -e .git ] ; then
    git init
fi

git config --local user.email "$1"
git config --local core.quotepath false
git config --local user.name HAYAMA_Kaoru

if [ ! -e .gitattributes ] ; then
    echo "* -text" > .gitattributes
    git add .gitattributes 
    git commit -m "Add .gitattributes as autocrlf=false"
fi
```
