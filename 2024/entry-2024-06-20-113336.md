Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2024/06/20/113336
Rem: App-Edited: 2024-06-20T11:33:36+09:00
Rem: Draft: no
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/6801883189115693425
Rem: Published: 2024-06-20T11:33:36+09:00
Category: awk
Updated: 2024-06-20T11:33:36+09:00
Title: ls (dir /b) の出力を JSON 配列にする (join関数なしに文字列連結を行う)
---
+ [lsの出力をJSON配列にする #Bash - Qiita](https://qiita.com/stoyosawa/items/176006ec9bc94bed9d8a#%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB)
+ [ときどきの雑記帖 Re* | Ghost in the Shell](http://www.kt.rim.or.jp/~kbk/zakkicho/post/2024/06/19/#awk)

自分も gawk × コマンドプロンプトバージョンで:

```
dir /b | gawk "BEGIN{ dem=\"[\n\" } ; { printf \"%s\x22%s\x22\",dem,$0 ; dem = \",\n\" } END{ print \"\n]\" }"
```

join 的な関数なしで文字列連結する場合、大抵は if 文で区切り文字を出力するか否かを判断させますが、「次に出力する区切り文字を変数に保持させておいて、初期値だけ変える」という方法もあります。

なお、短く書けますが、別に速くはなく、むしろ遅くなることが多いです。
