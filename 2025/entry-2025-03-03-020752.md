```header
Rem: Alternate-Url: https://zetamatta.hatenablog.com/entry/2025/03/03/020752
Rem: App-Edited: 2025-03-03T02:07:52+09:00
Rem: Draft: yes
Rem: Url-To-Edit: https://blog.hatena.ne.jp/zetamatta/zetamatta.hatenablog.com/atom/entry/6802418398333262758
Rem: Published: 2025-03-03T02:07:52+09:00
Category:
Updated: 2025-03-03T02:07:52+09:00
Title: Oracle Pro\*C から Go へのリプレース (妄想)
```
Pro\*C は、Oracle データベースにアクセスするために同社が提供するC言語の拡張である。同言語では SQL を直接C言語中に埋め込むことができるため、直感的に分かりやすく、SQL の妥当性の静的チェックもできる。

しかしながら、Pro\*C は基本がC言語だけあって、文字列操作一つにしてもバイト単位でのメモリ管理がたいへんだった。また、C++ の std::string も使えるものの、SQL へ直接引用できないため、変数間のデータのうつしかえが必要になってしまい、メリットが半減してしまう。

Go で Pro\*C のリプレースは可能かというと

- 技術的には可能
- 移行の難易度はケースによる
- メリットがあるケースでは移行を検討する価値あり
- PL/SQL やカーソルなど特殊な機能は自前でどうにかする必要あり
- もし移行を考えているなら、まず小規模なバッチ処理を Go に置き換えて試すのが良い

など、まぁ、想像の範囲内の回答が出た。一つだけ予想外だったのは Oracle 公式が推奨する Go のドライバは [github.com/godror/godror](https://github.com/godror/godror) ということだった。実際、検索してみると

* [GoとGodrorドライバをインストールする](https://docs.oracle.com/ja-jp/iaas/autonomous-database-serverless/doc/cdw-connect-go-install-go-and-godror.html)

と公式ドキュメントに実際に書いてあった。へー

ちょっと読んでみたが、どうやら単体で動くパッケージではなく、Oracle Client を呼び出すラッパーらしい。へー
（ github.com/sijms/go-ora/v2 は単体で接続可能 ）


